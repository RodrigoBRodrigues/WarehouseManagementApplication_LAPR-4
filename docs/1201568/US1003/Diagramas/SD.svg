<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1109px" preserveAspectRatio="none" style="width:2580px;height:1109px;background:#FFFFFF;" version="1.1" viewBox="0 0 2580 1109" width="2580px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="926.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="52" y="92.6094"/><rect fill="#FFFFFF" height="917.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="486" y="92.6094"/><rect fill="#FFFFFF" height="558.9141" style="stroke:#181818;stroke-width:1.0;" width="10" x="1039" y="420.4766"/><rect fill="#FFFFFF" height="103.3125" style="stroke:#181818;stroke-width:1.0;" width="10" x="1281" y="596.4922"/><rect fill="#FFFFFF" height="75.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="2094.5" y="740.1563"/><rect fill="#FFFFFF" height="72.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="2315.5" y="845.7266"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2495.5" y="949.0391"/><rect height="79.0547" style="stroke:#000000;stroke-width:1.5;fill:none;" width="580.5" x="10" y="312.0703"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="57" x2="57" y1="82.6094" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="490.5" x2="490.5" y1="82.6094" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1044" x2="1044" y1="82.6094" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1286" x2="1286" y1="496.1328" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1903" x2="1903" y1="635.7969" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2099" x2="2099" y1="739.1094" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2320" x2="2320" y1="781.7188" y2="1027.7422"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2500" x2="2500" y1="885.0313" y2="1027.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="20" y="79.5332">SalesClerk</text><ellipse cx="57" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57,21.5 L57,48.5 M44,29.5 L70,29.5 M57,48.5 L44,63.5 M57,48.5 L70,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="20" y="1041.2754">SalesClerk</text><ellipse cx="57" cy="1052.8516" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57,1060.8516 L57,1087.8516 M44,1068.8516 L70,1068.8516 M57,1087.8516 L44,1102.8516 M57,1087.8516 L70,1102.8516 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="401.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="408.5" y="71.5332">AddUserUI &lt;presentation&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="401.5" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="408.5" y="1048.2754">AddUserUI &lt;presentation&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="282" x="903" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="910" y="71.5332">:RegisterCustomerController &lt;application&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="282" x="903" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="910" y="1048.2754">:RegisterCustomerController &lt;application&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="1195" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1202" y="1048.2754">:CustomerBuilder&lt;builder&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="1832" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1839" y="1048.2754">:Customer&lt;Domain&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="1985" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215" x="1992" y="1048.2754">:PersistenceContext&lt;persistence&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="2224" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="2231" y="1048.2754">:RepositoryFactory&lt;factory&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="2427" y="1026.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="2434" y="1048.2754">:CustomerRepository</text><rect fill="#FFFFFF" height="926.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="52" y="92.6094"/><rect fill="#FFFFFF" height="917.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="486" y="92.6094"/><rect fill="#FFFFFF" height="558.9141" style="stroke:#181818;stroke-width:1.0;" width="10" x="1039" y="420.4766"/><rect fill="#FFFFFF" height="103.3125" style="stroke:#181818;stroke-width:1.0;" width="10" x="1281" y="596.4922"/><rect fill="#FFFFFF" height="75.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="2094.5" y="740.1563"/><rect fill="#FFFFFF" height="72.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="2315.5" y="845.7266"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2495.5" y="949.0391"/><polygon fill="#181818" points="474,110.9609,484,114.9609,474,118.9609,478,114.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="480" y1="114.9609" y2="114.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="110.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="80" y="110.1045">Add Customer Option Selected</text><polygon fill="#181818" points="73,141.3125,63,145.3125,73,149.3125,69,145.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="485" y1="145.3125" y2="145.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="79" y="140.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="90" y="140.4561">asks customer's information</text><polygon fill="#181818" points="474,171.6641,484,175.6641,474,179.6641,478,175.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="480" y1="175.6641" y2="175.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="170.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="80" y="170.8076">name, VAT, email</text><polygon fill="#181818" points="73,202.0156,63,206.0156,73,210.0156,69,206.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="485" y1="206.0156" y2="206.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="79" y="201.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="90" y="201.1592">asks VAT</text><polygon fill="#181818" points="474,232.3672,484,236.3672,474,240.3672,478,236.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="480" y1="236.3672" y2="236.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="231.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="80" y="231.5107">introduces VAT</text><polygon fill="#181818" points="73,262.7188,63,266.7188,73,270.7188,69,266.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="485" y1="266.7188" y2="266.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="79" y="261.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="90" y="261.8623">asks email</text><polygon fill="#181818" points="474,293.0703,484,297.0703,474,301.0703,478,297.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="480" y1="297.0703" y2="297.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="292.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="80" y="292.2139">introduces email</text><path d="M10,312.0703 L71,312.0703 L71,320.4219 L61,330.4219 L10,330.4219 L10,312.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="580.5" x="10" y="312.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="326.5654">alt</text><polygon fill="#181818" points="73,348.7734,63,352.7734,73,356.7734,69,352.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="485" y1="352.7734" y2="352.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="79" y="347.917">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="90" y="347.917">asks customer's optional information</text><polygon fill="#181818" points="474,379.125,484,383.125,474,387.125,478,383.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="480" y1="383.125" y2="383.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="378.2686">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="389" x="80" y="378.2686">mobile phone number, birthdate, gender, address (billing, shipment)</text><polygon fill="#181818" points="1027,416.4766,1037,420.4766,1027,424.4766,1031,420.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="496" x2="1033" y1="420.4766" y2="420.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="503" y="415.6201">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="506" x="521" y="415.6201">registerCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)</text><path d="M1083,433.4766 L1083,459.4766 L1489,459.4766 L1489,443.4766 L1479,433.4766 L1083,433.4766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1479,433.4766 L1479,443.4766 L1489,443.4766 L1479,433.4766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="385" x="1089" y="451.9717">CustomerBuilder cria entidade do tipo Customer num estado válido</text><polygon fill="#181818" points="1183,483.1797,1193,487.1797,1183,491.1797,1187,487.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="1189" y1="487.1797" y2="487.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="482.3232">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1074" y="482.3232">create</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="1195" y="464.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1202" y="486.3613">:CustomerBuilder&lt;builder&gt;</text><polygon fill="#181818" points="1274,525.7891,1284,529.7891,1274,533.7891,1278,529.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="1280" y1="529.7891" y2="529.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="524.9326">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1074" y="524.9326">setName(name)</text><path d="M930,542.7891 L930,568.7891 L1399,568.7891 L1399,552.7891 L1389,542.7891 L930,542.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1389,542.7891 L1389,552.7891 L1399,552.7891 L1389,542.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1072.5" y="561.2842">Set the  rest of the information</text><polygon fill="#181818" points="1269,592.4922,1279,596.4922,1269,600.4922,1273,596.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="1275" y1="596.4922" y2="596.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="591.6357">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="1074" y="591.6357">build()</text><polygon fill="#181818" points="1820,622.8438,1830,626.8438,1820,630.8438,1824,626.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1291" x2="1826" y1="626.8438" y2="626.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1298" y="621.9873">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="499" x="1316" y="621.9873">createCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="1832" y="604.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1839" y="626.0254">:Customer&lt;Domain&gt;</text><polygon fill="#181818" points="1302,665.4531,1292,669.4531,1302,673.4531,1298,669.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1296" x2="1902.5" y1="669.4531" y2="669.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1308" y="664.5967">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="1326" y="664.5967">customer</text><polygon fill="#181818" points="1060,695.8047,1050,699.8047,1060,703.8047,1056,699.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1054" x2="1285" y1="699.8047" y2="699.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1066" y="694.9482">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="1084" y="694.9482">customer</text><polygon fill="#181818" points="1973,726.1563,1983,730.1563,1973,734.1563,1977,730.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="1979" y1="730.1563" y2="730.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="725.2998">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1074" y="725.2998">repositories()</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="1985" y="707.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215" x="1992" y="729.3379">:PersistenceContext&lt;persistence&gt;</text><polygon fill="#181818" points="2212,768.7656,2222,772.7656,2212,776.7656,2216,772.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2104.5" x2="2218" y1="772.7656" y2="772.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2111.5" y="767.9092">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="2129.5" y="767.9092">create</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="2224" y="750.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="2231" y="771.9473">:RepositoryFactory&lt;factory&gt;</text><polygon fill="#181818" points="1060,811.375,1050,815.375,1060,819.375,1056,815.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1054" x2="2098.5" y1="815.375" y2="815.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1066" y="810.5186">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="1084" y="810.5186">factory</text><polygon fill="#181818" points="2303.5,841.7266,2313.5,845.7266,2303.5,849.7266,2307.5,845.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="2309.5" y1="845.7266" y2="845.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="840.8701">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1074" y="840.8701">customers()</text><polygon fill="#181818" points="2415,872.0781,2425,876.0781,2415,880.0781,2419,876.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2325.5" x2="2421" y1="876.0781" y2="876.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2332.5" y="871.2217">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="2350.5" y="871.2217">create</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="2427" y="853.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="2434" y="875.2598">:CustomerRepository</text><polygon fill="#181818" points="1060,914.6875,1050,918.6875,1060,922.6875,1056,918.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1054" x2="2319.5" y1="918.6875" y2="918.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1066" y="913.8311">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1084" y="913.8311">customerRepository</text><polygon fill="#181818" points="2483.5,945.0391,2493.5,949.0391,2483.5,953.0391,2487.5,949.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1049" x2="2489.5" y1="949.0391" y2="949.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1056" y="944.1826">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1074" y="944.1826">save(customer)</text><polygon fill="#181818" points="507,975.3906,497,979.3906,507,983.3906,503,979.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="501" x2="1043" y1="979.3906" y2="979.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="974.5342">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="531" y="974.5342">confirmation is show to the user</text><polygon fill="#181818" points="73,1005.7422,63,1009.7422,73,1013.7422,69,1009.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="490" y1="1009.7422" y2="1009.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="79" y="1004.8857">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="97" y="1004.8857">confirmation is show to the user</text><!--MD5=[12af1c408fa17de5805c28916e49dac8]
@startuml
autonumber
actor "SalesClerk" as SC

participant  "AddUserUI <presentation>" as SYS
participant ":RegisterCustomerController <application>" as CTRL
participant ":CustomerBuilder<builder>" as CSB
participant ":Customer<Domain>" as CUS
participant ":PersistenceContext<persistence>" as PC
participant ":RepositoryFactory<factory>" as RF
participant ":CustomerRepository" as CR




activate SC
activate SYS

SC-> SYS: Add Customer Option Selected
SYS-> SC: asks customer's information

SC-> SYS: name, VAT, email

SYS-> SC: asks VAT
SC-> SYS: introduces VAT
SYS-> SC: asks email
SC-> SYS: introduces email

alt
SYS-> SC: asks customer's optional information
SC-> SYS: mobile phone number, birthdate, gender, address (billing, shipment)


end alt


SYS-> CTRL : registerCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)
note over CSB: CustomerBuilder cria entidade do tipo Customer num estado válido
activate CTRL
CTRL-> CSB **: create

CTRL-> CSB: setName(name)


note over CTRL, CSB:Set the  rest of the information
CTRL-> CSB: build()
activate CSB
CSB -> CUS** : createCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)
CUS -> CSB: customer

CSB -> CTRL: customer
deactivate CSB

CTRL-> PC**: repositories()
activate PC
PC-> RF**: create
PC-> CTRL: factory
deactivate PC

CTRL-> RF: customers()
activate RF
RF->CR**: create

RF->CTRL: customerRepository
deactivate RF
CTRL->CR: save(customer)

deactivate PC
activate CR

CTRL -> SYS: confirmation is show to the user
deactivate CR
deactivate CTRL

SYS-> SC: confirmation is show to the user
deactivate SYS
@enduml

PlantUML version 1.2022.4(Sat Apr 09 15:29:17 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>