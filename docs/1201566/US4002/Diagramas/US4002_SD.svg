<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="570px" preserveAspectRatio="none" style="width:946px;height:570px;background:#FFFFFF;" version="1.1" viewBox="0 0 946 570" width="946px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="447.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="199.5" y="62.5938"/><rect fill="#FFFFFF" height="318.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="618.5" y="192.125"/><rect height="432.7266" style="stroke:#000000;stroke-width:1.5;fill:none;" width="930.5" x="10" y="69.5938"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="52.5938" y2="519.3203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="204" x2="204" y1="52.5938" y2="519.3203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="468.5" x2="468.5" y1="52.5938" y2="519.3203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="623.5" x2="623.5" y1="52.5938" y2="519.3203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="863.5" x2="863.5" y1="52.5938" y2="519.3203"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="40.5" y="24.9951">«Server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="27" y="41.292">AGVManager</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="20" y="518.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="40.5" y="538.3154">«Server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="27" y="554.6123">AGVManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="136" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="143" y="41.292">DigitalTwinClient</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="136" y="518.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="143" y="538.3154">DigitalTwinClient</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="408.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="415.5" y="41.292">TCPAGVServer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="408.5" y="518.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="415.5" y="538.3154">TCPAGVServer</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="538.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="591" y="24.9951">«thread»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="545.5" y="41.292">TCPAGVServerThread</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="538.5" y="518.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="591" y="538.3154">«thread»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="545.5" y="554.6123">TCPAGVServerThread</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="796.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="803.5" y="41.292">OrderRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="796.5" y="518.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="803.5" y="538.3154">OrderRepository</text><rect fill="#FFFFFF" height="447.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="199.5" y="62.5938"/><rect fill="#FFFFFF" height="318.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="618.5" y="192.125"/><path d="M10,69.5938 L88,69.5938 L88,76.7266 L78,86.7266 L10,86.7266 L10,69.5938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="432.7266" style="stroke:#000000;stroke-width:1.5;" width="930.5" x="10" y="69.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="25" y="82.6606">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="103" y="81.8042">[true]</text><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="251.5" y1="107.8594" y2="107.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="251.5" x2="251.5" y1="107.8594" y2="120.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="210.5" x2="251.5" y1="120.8594" y2="120.8594"/><polygon fill="#181818" points="220.5,116.8594,210.5,120.8594,220.5,124.8594,216.5,120.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="216.5" y="102.7935">buildStateChangePacket(state,agvID)</text><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="251.5" y1="149.9922" y2="149.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="251.5" x2="251.5" y1="149.9922" y2="162.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="210.5" x2="251.5" y1="162.9922" y2="162.9922"/><polygon fill="#181818" points="220.5,158.9922,210.5,162.9922,220.5,166.9922,216.5,162.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="216.5" y="144.9263">start</text><polygon fill="#181818" points="456.5,188.125,466.5,192.125,456.5,196.125,460.5,192.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="462.5" y1="192.125" y2="192.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="216.5" y="187.0591">accept</text><polygon fill="#181818" points="606.5,217.2578,616.5,221.2578,606.5,225.2578,610.5,221.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="468.5" x2="612.5" y1="221.2578" y2="221.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="475.5" y="216.1919">start</text><polygon fill="#181818" points="479.5,246.3906,469.5,250.3906,479.5,254.3906,475.5,250.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="617.5" y1="250.3906" y2="250.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="485.5" y="245.3247">parse</text><polygon fill="#181818" points="851.5,275.5234,861.5,279.5234,851.5,283.5234,855.5,279.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="628.5" x2="857.5" y1="279.5234" y2="279.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="635.5" y="274.4575">findOrdersByStateAndDateAsc()</text><polygon fill="#181818" points="479.5,304.6563,469.5,308.6563,479.5,312.6563,475.5,308.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="617.5" y1="308.6563" y2="308.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="485.5" y="303.5903">build</text><polygon fill="#181818" points="220.5,333.7891,210.5,337.7891,220.5,341.7891,216.5,337.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="214.5" x2="617.5" y1="337.7891" y2="337.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="226.5" y="332.7231">responds</text><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="251.5" y1="366.9219" y2="366.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="251.5" x2="251.5" y1="366.9219" y2="379.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="210.5" x2="251.5" y1="379.9219" y2="379.9219"/><polygon fill="#181818" points="220.5,375.9219,210.5,379.9219,220.5,383.9219,216.5,379.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="216.5" y="361.856">works(sleeps)</text><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="251.5" y1="409.0547" y2="409.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="251.5" x2="251.5" y1="409.0547" y2="422.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="210.5" x2="251.5" y1="422.0547" y2="422.0547"/><polygon fill="#181818" points="220.5,418.0547,210.5,422.0547,220.5,426.0547,216.5,422.0547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="216.5" y="403.9888">buildStateChangePacket(state,agvID)</text><polygon fill="#181818" points="606.5,447.1875,616.5,451.1875,606.5,455.1875,610.5,451.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209.5" x2="612.5" y1="451.1875" y2="451.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="216.5" y="446.1216">send</text><polygon fill="#181818" points="84,461.1875,74,465.1875,84,469.1875,80,465.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="617.5" y1="465.1875" y2="465.1875"/><polygon fill="#181818" points="851.5,490.3203,861.5,494.3203,851.5,498.3203,855.5,494.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="628.5" x2="857.5" y1="494.3203" y2="494.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="635.5" y="489.2544">save(order) (state was changed)</text><!--MD5=[2e4589414608a5c9b5fe9e2114158d72]
@startuml
participant AGVManager <<Server>>


loop true
Activate DigitalTwinClient
DigitalTwinClient -> DigitalTwinClient: buildStateChangePacket(state,agvID)
DigitalTwinClient -> DigitalTwinClient: start
DigitalTwinClient -> TCPAGVServer: accept



participant TCPAGVServerThread  <<thread>>
activate TCPAGVServerThread 
TCPAGVServer -> TCPAGVServerThread : start



TCPAGVServerThread -> TCPAGVServer:parse

TCPAGVServerThread  -> OrderRepository : findOrdersByStateAndDateAsc()
TCPAGVServerThread  -> TCPAGVServer:build

TCPAGVServerThread  -> DigitalTwinClient:responds

DigitalTwinClient  -> DigitalTwinClient:works(sleeps)

DigitalTwinClient -> DigitalTwinClient: buildStateChangePacket(state,agvID)
DigitalTwinClient -> TCPAGVServerThread : send

TCPAGVServerThread  - -> AGVManager

TCPAGVServerThread  -> OrderRepository : save(order) (state was changed)
end
@enduml

PlantUML version 1.2022.6beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>